{% extends "base.html" %}
{% load widget_tweaks %}
{% block title %}recipe_create.html{% endblock %}
{% block content %}
<h1>Post Create/Update {{user}}</h1>
<p class="font-italic">This is a creation or update form for your post.</p>
<style>
    .hidden{display:none;}

</style>
{% if form.errors %}
<div class="alert alert-danger">
    <div class="font-weight-bold">
        Wrong! Please correct the error(s) below.
    </div>
    {{ form.errors }}
</div>
{% endif %}
<div class="container">

    <form action="." class="card pt-3" method="post">{% csrf_token %}
        <div class="form-group row">
            {{ form.Rec_conName| add_label_class:"col-form-label col-sm-2 ml-3 font-weight-bold" }}
            <div class="col-sm-5">
                {{ form.Rec_conName|add_class:"form-control"|attr:"autofocus" }}
            </div>
        </div>
        <div class="row">
            {{ form.Rec_conContent| add_label_class:"col-form-label col-sm-2 ml-3 font-weight-bold" }}

            <div class="col-md-8">

                <input class="hidden" id="upload" name="image" onchange="" type="file">
                {{ form.Rec_conContent|add_class:"form-control" }}
            </div>
            <div class="col-md-4"></div>
        </div>


        <div class="form-group row">
            {{ form.Rec_conTags| add_label_class:"col-form-label col-sm-2 ml-3 font-weight-bold" }}
            <div class="col-sm-5">
                {{ form.Rec_conTags|add_class:"form-control" }}
            </div>
            <small class="form-text text-muted">{{ form.tags.help_text }}</small>
        </div>


        <div class="form-group">
            <div class="offset-sm-2 col-sm-5">
                <input class="btn btn-info" type="submit" value="let's go"/>
            </div>
        </div>
    </form>
</div>

{% endblock %}

{% block extra-script %}
<!--  <script type="text/javascript" src="/tinymce/tinymce.min.js"></script>-->
<script>





tinymce.init({
	selector: 'textarea',
	height: 600,
	theme: 'modern',
	plugins: [
		'advlist autolink lists link image charmap print preview hr anchor pagebreak',
		'searchreplace wordcount visualblocks visualchars code fullscreen',
		'insertdatetime media nonbreaking save table contextmenu directionality',
		'emoticons template paste textcolor colorpicker textpattern imagetools'
	],
	toolbar1: ' mySubmit | myButton | insertfile undo redo | styleselect | bold italic forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media fullscreen',
	//toolbar2: 'print preview media | forecolor backcolor emoticons',

	image_advtab: true,
	templates: [
		{ title: 'Test template 1', content: 'Test 1' },
		{ title: 'Test template 2', content: 'Test 2' }
	],
	content_css: [
		'//fonts.googleapis.com/css?family=Lato:300,300i,400,400i',
		'//www.tinymce.com/css/codepen.min.css'
	],

	setup: function (editor) {
		editor.addButton('myButton', {
			text: '파일 업로드',
			icon: false,
			onclick: function (data) {
				window.open('{% url 'recipe:image' %}','_fileupload','width=800, height=600');
			}
		});

		editor.addButton('mySubmit', {
			text: '문서저장하기',
			icon: false,
			onclick: function () {
				if(confirm('저장하시겠습니까?'))
				{
					document.FORM_NAME.submit();
				}
			}
		});
	}

});



<!--tinymce.init({-->
<!--	selector: 'textarea',-->
<!--	height: 600,-->
<!--	language_url: '/tinymce/langs/ko.js',-->
<!--	theme: 'modern',-->
<!--	plugins: [-->
<!--		'advlist autolink lists link image charmap print preview hr anchor pagebreak',-->
<!--		'searchreplace wordcount visualblocks visualchars code fullscreen',-->
<!--		'insertdatetime media nonbreaking save table contextmenu directionality',-->
<!--		'emoticons template paste textcolor colorpicker textpattern imagetools'-->
<!--	],-->
<!--	toolbar1: ' mySubmit | myButton | insertfile undo redo | styleselect | bold italic forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media fullscreen',-->
<!--	//toolbar2: 'print preview media | forecolor backcolor emoticons',-->

<!--	image_advtab: true,-->
<!--	templates: [-->
<!--		{ title: 'Test template 1', content: 'Test 1' },-->
<!--		{ title: 'Test template 2', content: 'Test 2' }-->
<!--	],-->
<!--	content_css: [-->
<!--		'//fonts.googleapis.com/css?family=Lato:300,300i,400,400i',-->
<!--		'//www.tinymce.com/css/codepen.min.css'-->
<!--	],-->

<!--	setup: function (editor) {-->
<!--		editor.addButton('myButton', {-->
<!--			text: 'File',-->
<!--			icon: false,-->
<!--			onclick: function () {-->
<!--				window.open('{% url 'recipe:image' %}','_fileupload','width=800, height=600');-->
<!--			}-->
<!--		});-->

<!--		editor.addButton('mySubmit', {-->
<!--			text: '문서저장하기',-->
<!--			icon: false,-->
<!--			onclick: function () {-->
<!--				if(confirm('저장하시겠습니까?'))-->
<!--				{-->
<!--					document.FORM_NAME.submit();-->
<!--				}-->
<!--			}-->
<!--		});-->
<!--	}-->

<!--});-->





<!--       tinymce.init({-->
<!--            selector: "textarea",-->
<!--            theme: "modern",-->
<!--            height:1000,-->
<!--            min_height: 800,-->
<!--            menubar:false,-->
<!--            plugins: "autolink autosave code link media image table textcolor autoresize",-->
<!--            toolbar: "undo redo | styleselect | forecolor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | table link media custom_image code ",-->
<!--            setup: function(editor) {-->
<!--            editor.addButton('custom_image', {-->
<!--                    title: 'insert_images',-->
<!--                    icon: 'image',-->
<!--                    onclick: function() {-->
<!--                        window.open("{% url 'recipe:image' %}","tinymcePop","width=400,height=350");-->
<!--                    }-->
<!--                });-->
<!--            }-->

<!--        });-->


<!--tinymce.init({-->

<!--  selector: 'textarea',-->

<!--  plugins : 'advlist autolink link image lists charmap print preview',-->

<!--  toolbar: [-->

<!--    'undo redo | styleselect | bold italic | alignleft aligncenter alignright | link image'-->

<!--  ],-->

<!--  height: 400,-->

<!--  branding: false,-->

<!--  image_title: true,-->

<!--  file_picker_types: 'image',-->

<!--  file_picker_callback: function(cb, value, meta) {-->

<!--    var input = document.createElement('input');-->

<!--    input.setAttribute('type', 'file');-->

<!--    input.setAttribute('accept', 'image/*');-->



<!--    input.onchange = function() {-->

<!--      var file = this.files[0];-->



<!--      var reader = new FileReader();-->

<!--      reader.onload = function () {-->

<!--        var id = 'blobid' + (new Date()).getTime();-->

<!--        var blobCache =  tinymce.activeEditor.editorUpload.blobCache;-->

<!--        var base64 = reader.result.split(',')[1];-->

<!--        var blobInfo = blobCache.create(id, file, base64);-->

<!--        blobCache.add(blobInfo);-->



<!--        cb(blobInfo.blobUri(), { title: file.name });-->

<!--      };-->

<!--      reader.readAsDataURL(file);-->

<!--    };-->



<!--    input.click();-->

<!--  },-->

<!--relative_urls : false,-->

<!--remove_script_host : false,-->


<!--  images_reuse_filename: true,-->

<!--  language: 'ko_KR',-->

<!--  setup: function (editor) {-->

<!--    geditor = editor;-->



<!--    editor.on('change', function (e) {-->

<!--      editor.save();-->

<!--    });-->

<!--  }-->

<!--});-->


<!--        tinymce.init({-->
<!--          selector: "textarea",-->
<!--          theme: "modern",-->
<!--          paste_data_images: true,-->
<!--          plugins: [-->
<!--            "advlist autolink lists link image charmap print preview hr anchor pagebreak",-->
<!--            "searchreplace wordcount visualblocks visualchars code fullscreen",-->
<!--            "insertdatetime media nonbreaking save table contextmenu directionality",-->
<!--            "emoticons template paste textcolor colorpicker textpattern"-->
<!--          ],-->
<!--          toolbar1: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",-->
<!--          toolbar2: "print preview media | forecolor backcolor emoticons",-->
<!--          image_advtab: true,-->
<!--          file_picker_callback: function(callback, value, meta) {-->
<!--            if (meta.filetype == 'image') {-->
<!--              $('#upload').trigger('click');-->
<!--              $('#upload').on('change', function() {-->
<!--                var file = this.files[0];-->
<!--                var reader = new FileReader();-->
<!--                reader.onload = function(e) {-->
<!--                  callback(e.target.result, {-->
<!--                    alt: ''-->
<!--                  });-->
<!--                };-->
<!--                reader.readAsDataURL(file);-->
<!--              });-->
<!--            }-->
<!--          },-->
<!--          templates: [{-->
<!--            title: 'Test template 1',-->
<!--            content: 'Test 1'-->
<!--          }, {-->
<!--            title: 'Test template 2',-->
<!--            content: 'Test 2'-->
<!--          }]-->
<!--        });-->



</script>
{% endblock %}
